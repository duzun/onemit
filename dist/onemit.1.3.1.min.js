/*
 MIT
   @version 1.3.1
   @repo    https://github.com/duzun/onemit
*/
(function(t,n,l){l+="";var p={}.hasOwnProperty,m=[].slice,u=[].splice,q=p.bind,r=typeof setTimeout!=l?setTimeout:n.setTimeout,v=typeof setImmediate!=l?setImmediate:n.setImmediate;("function"===typeof define&&define.amd?define:typeof module!=l&&module.exports?function(e,f){module.exports=f()}:function(e,f){n[t]=f()})([],function(){function e(a){if(a){var d=e.prototype,b;for(b in d)p.call(d,b)&&(a[b]=d[b]);return a}}function f(a){var d=this._callbacks||(this._callbacks={});return d[a]||(d[a]=[])}e.prototype.on=
function(a,d){f.call(this,a).push(d);return this};e.prototype.only=function(a,d){var b=f.call(this,a);0>b.indexOf(d)&&b.push(d);return this};e.prototype.once=function(a,d){function b(){this.off(a,b);d.apply(this,arguments)}b.fn=d;return this.on(a,b)};e.prototype.off=function(a,d){var b=this._callbacks;if(!b)return this;if(0==arguments.length)return b&&(this._callbacks={}),this;var g=b[a];if(!g)return this;if(1==arguments.length)return delete b[a],this;for(var c=g.length;c--;)b=g[c],b!==d&&b.fn!==
d||u.call(g,c,1);return this};e.prototype.emit=function(a,d,b){var g,c;if(!(g=this._callbacks))return this;c=g[a];g=g["*"];if(c&&c.length)c=g&&g.length?c.concat(g):m.call(c,0);else if(g&&g.length)c=m.call(g,0);else return this;g=m.call(arguments,0);for(var h=c.length,e=0;e<h;++e)c[e].apply(this,g);return this};e.prototype.emitAfter=function(a,d,b,g){var c=this,h,f,l=e.setTimeout||r;if(!(h=c._callbacks))return c;f=h[d];h=h["*"];if(f&&f.length)f=h&&h.length?f.concat(h):f;else if(h&&h.length)f=h;else return c;
h=f.length;var k=+("number"==typeof a),n=m.call(arguments,k);for(k?k=0:a=0;k<h;++k)l(function(a){return function(){a.apply(c,n)}}(f[k]),a);return c};e.prototype.emitAsync=function(a,d,b){var g=this,c,h,f=e.setImmediate||v||r||e.setTimeout;if(!(c=g._callbacks))return g;h=c[a];c=c["*"];if(h&&h.length)h=c&&c.length?h.concat(c):h;else if(c&&c.length)h=c;else return g;c=h.length;for(var l=arguments,k=0;k<c;++k)f(function(a){return function(){a.apply(g,l)}}(h[k]));return g};e.prototype.bind=function(a){var d=
e.prototype,b;for(b in d)p.call(d,b)&&"function"==typeof d[b]&&(a[b]=q.call(d[b],this));return a};e.prototype.listeners=f;e.prototype.hasListeners=function(a){return!!f.call(this,a).length};return e});"function"!=typeof q&&(q=function(e){var f=m.call(arguments,1),a=this,d=function(){},b=f.length?function(){var b=arguments;return a.apply(this instanceof d&&e?this:e,b.length?f.concat(m.call(b)):f)}:function(){return a.apply(this instanceof d&&e?this:e,arguments)};d.prototype=a.prototype;b.prototype=
new d;return b})})("OnEmit","undefined"==typeof self?"undefined"==typeof global?this:global:self);